{% extends "base.html" %}

{% block body %}
<div class="container">
    <div id="piechart"></div>
    <table class="table table-striped table-sm" id="results">
        <thead>
        </thead>
        <tbody>
            <tr>
                <td>Failed</td>
                <td>
                    <a href="/failed">{{ failed }}</a>
                </td>
            </tr>
            <tr>
                <td>Passed</td>
                <td>
                    <a href="/passed">{{ passed }}</a>
                </td>
            </tr>
            <tr>
                <td>Total</td>
                <td>
                    <a href="/all">{{ total }}</a>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<script>
    $(document).ready(function() {
        Highcharts.chart('piechart', {
            chart: {
                type: 'pie',
                options3d: {
                    enabled: true,
                    alpha: 45,
                    beta: 0
                }
            },
            title: {
                text: 'Test result stats'
            },
            tooltip: {
                pointFormat: '{series.name}: <b>{point.y:.1f}</b>'
            },
            plotOptions: {
                pie: {
                    allowPointSelect: true,
                    cursor: 'pointer',
                    depth: 35,
                    colors: ['#4caf50', '#d50000'],
                    dataLabels: {
                        enabled: true,
                        format: '<b>{point.name}</b>: {point.y:.1f}',
                        style: {
                            color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black'
                        }
                    }
                }
            },
            series: [{
                name: 'Count',
                colorByPoint: true,
                data: [{
                    name: 'Pass',
                    y: {{ passed }},
                    sliced: true,
                    selected: true
                }, {
                    name: 'Fail',
                    y: {{ failed }}
                }]
            }]
        });
    });
</script>
{% endblock %}